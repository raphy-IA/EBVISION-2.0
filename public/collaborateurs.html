<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>EBVISION 2.0 - Gestion des Collaborateurs</title><!-- CSS Bootstrap et FontAwesome --><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"><!-- CSS de la sidebar moderne --><link rel="stylesheet" href="css/modern-sidebar.css"><!-- Script d'authentification --><script src="js/auth.js"></script><script src="js/menu-permissions.js"></script><!-- Scripts de zone utilisateur --><!-- <script src="js/user-modals.js"></script> --><link rel="stylesheet" href="css/collaborateurs.css" media="all"><script src="js/global-auth.js"></script><!-- Script pour la gestion utilisateur --><script src="js/user-header.js"></script><script src="js/profile-menu.js"></script><script src="js/notifications.js"></script><script src="js/tasks.js"></script><!-- Scripts pour la top bar EBVISION 2.0 --><script src="js/collaborateurs.js" defer></script>
    <!-- Optimisations de performance -->
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#2c3e50">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
</head><body><!-- Bouton toggle sidebar mobile --><button class="sidebar-toggle d-md-none"><i class="fas fa-bars"></i></button><div class="page-wrapper"><!-- Sidebar Container --><div class="sidebar-container"><!-- La sidebar sera générée par JavaScript --></div><!-- Main Content Area --><div class="main-content-area"><div id="collaborateurs-section"><div class="page-header d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-3 gap-2"><h2><i class="fas fa-users me-2"></i>Gestion des Collaborateurs</h2><button class="btn btn-primary" onclick="showNewCollaborateurModal()"><i class="fas fa-plus me-2"></i>Nouveau Collaborateur</button></div><!-- Onglets --><ul class="nav nav-tabs nav-fill mb-3" id="collaborateursTabs" role="tablist"><li class="nav-item" role="presentation"><button class="nav-link active" id="collaborateurs-tab" data-bs-toggle="tab" data-bs-target="#collaborateurs-content" type="button" role="tab" aria-controls="collaborateurs-content" aria-selected="true"><i class="fas fa-users me-2"></i>Collaborateurs </button></li><li class="nav-item" role="presentation"><button class="nav-link" id="superviseurs-tab" data-bs-toggle="tab" data-bs-target="#superviseurs-content" type="button" role="tab" aria-controls="superviseurs-content" aria-selected="false"><i class="fas fa-user-shield me-2"></i>Superviseurs </button></li></ul><!-- Contenu des onglets --><div class="tab-content mt-0 pt-0" id="collaborateursTabsContent"><!-- Onglet Collaborateurs --><div class="tab-pane fade show active p-0" id="collaborateurs-content" role="tabpanel" aria-labelledby="collaborateurs-tab"><!-- Statistiques (cartes colorées) --><div class="row g-2 mb-3"><div class="col-lg-3 col-md-6 col-12"><div class="card stat-card"><div class="card-body text-center"><i class="fas fa-users mb-2"></i><div class="stat-number" id="total-collaborateurs">0</div><div>Total Collaborateurs</div></div></div></div><div class="col-lg-3 col-md-6 col-12"><div class="card stat-card success"><div class="card-body text-center"><i class="fas fa-user-check mb-2"></i><div class="stat-number" id="actifs-collaborateurs">0</div><div>Actifs</div></div></div></div><div class="col-lg-3 col-md-6 col-12"><div class="card stat-card warning"><div class="card-body text-center"><i class="fas fa-clock mb-2"></i><div class="stat-number" id="total-heures">0</div><div>Heures Total</div></div></div></div><div class="col-lg-3 col-md-6 col-12"><div class="card stat-card info"><div class="card-body text-center"><i class="fas fa-chart-line mb-2"></i><div class="stat-number" id="moyenne-heures">0</div><div>Moyenne/H</div></div></div></div></div><!-- Filters and Search --><div class="card filters-card"><div class="card-body"><div class="row g-2"><div class="col-lg-4 col-md-6 col-12"><label for="search-input" class="form-label">Rechercher</label><input type="text" class="form-control" id="search-input" placeholder="Nom, prénom, email..." onkeyup="filterCollaborateurs()"></div><div class="col-lg-3 col-md-6 col-12"><label for="business-unit-filter" class="form-label">Business Unit</label><select id="business-unit-filter" class="form-select" onchange="filterCollaborateurs()"><option value="">Toutes les business units</option></select></div><div class="col-lg-3 col-md-6 col-12"><label for="status-filter" class="form-label">Statut</label><select id="status-filter" class="form-select" onchange="filterCollaborateurs()"><option value="">Tous les statuts</option><option value="ACTIF">Actif</option><option value="INACTIF">Inactif</option></select></div><div class="col-lg-2 col-md-6 col-12"><label class="form-label">&nbsp;</label><button class="btn btn-outline-secondary w-100" onclick="exportCollaborateurs()"><i class="fas fa-file-excel me-2"></i>Export Excel</button></div></div></div></div><!-- Collaborateurs Table --><div class="card"><div class="card-header"><h5 class="card-title mb-0"><i class="fas fa-users me-2"></i>Liste des Collaborateurs</h5></div><div class="card-body"><div id="collaborateurs-loading" class="loading" style="display: none;"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Chargement...</span></div></div><div id="collaborateurs-table-content" style="display: block;"><div class="table-responsive"><table class="table table-hover"><thead><tr><th></th><th>Nom</th><th>Prénom</th><th>Email</th><th>Téléphone</th><th>Business Unit</th><th>Division</th><th>Type de Collaborateur</th><th>Poste</th><th>Grade</th><th>Statut</th><th>Actions</th></tr></thead><tbody id="collaborateurs-table"><!-- Collaborateurs will be loaded here by JavaScript --></tbody></table></div><!-- Contrôles de pagination --><div id="pagination-container" class="mt-3"><!-- La pagination sera générée par JavaScript --></div></div></div></div></div><!-- Onglet Superviseurs --><div class="tab-pane fade p-0" id="superviseurs-content" role="tabpanel" aria-labelledby="superviseurs-tab"><!-- Statistiques des superviseurs --><div class="row mb-4"><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><div class="card stat-card"><div class="card-body text-center"><i class="fas fa-user-shield fa-2x mb-2"></i><div class="stat-number" id="total-supervisors">0</div><div>Superviseurs configurés</div></div></div></div><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><div class="card stat-card success"><div class="card-body text-center"><i class="fas fa-users fa-2x mb-2"></i><div class="stat-number" id="total-collaborateurs-supervised">0</div><div>Collaborateurs avec superviseurs</div></div></div></div><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><div class="card stat-card warning"><div class="card-body text-center"><i class="fas fa-clock fa-2x mb-2"></i><div class="stat-number" id="pending-approvals">0</div><div>Feuilles en attente</div></div></div></div><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><div class="card stat-card info"><div class="card-body text-center"><i class="fas fa-link fa-2x mb-2"></i><div class="stat-number" id="total-relations">0</div><div>Relations configurées</div></div></div></div></div><!-- Formulaire d'ajout de superviseur --><div class="card mb-4"><div class="card-header"><h5 class="card-title mb-0"><i class="fas fa-plus-circle me-2"></i>Ajouter des relations superviseur</h5></div><div class="card-body"><form id="add-supervisor-form"><div class="row g-2"><div class="col-lg-4 col-lg-6 col-12 col-sm-12"><label for="supervisor-select" class="form-label">Superviseur</label><select class="form-select" id="supervisor-select" required><option value="">Sélectionner un superviseur</option></select></div><div class="col-lg-6 col-12"><label for="collaborateurs-select" class="form-label">Collaborateurs à superviser</label><select class="form-select" id="collaborateurs-select" multiple size="6" required><!-- Les options seront remplies par JavaScript --></select><small class="form-text text-muted">Maintenez Ctrl (ou Cmd) pour sélectionner plusieurs collaborateurs</small></div><div class="col-md-2"><label class="form-label">&nbsp;</label><button type="submit" class="btn btn-primary w-100"><i class="fas fa-plus"></i> Ajouter </button></div></div></form></div></div><!-- Liste des superviseurs --><div class="card"><div class="card-header"><h5 class="card-title mb-0"><i class="fas fa-list me-2"></i>Superviseurs configurés</h5></div><div class="card-body"><div id="supervisors-container"><div class="text-center"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Chargement...</span></div></div></div></div></div></div></div></div></div></div><!-- Modals --><!-- New Collaborateur Modal --><div class="modal fade" id="newCollaborateurModal" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"><i class="fas fa-plus me-2"></i> Nouveau collaborateur </h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form id="newCollaborateurForm"><div class="row g-2"><div class="col-lg-6 col-12 mb-3"><label for="nom-input" class="form-label">Nom *</label><input type="text" class="form-control" id="nom-input" required></div><div class="col-lg-6 col-12 mb-3"><label for="prenom-input" class="form-label">Prénom *</label><input type="text" class="form-control" id="prenom-input" required></div></div><div class="row g-2"><div class="col-lg-6 col-12 mb-3"><label for="email-input" class="form-label">Email *</label><input type="email" class="form-control" id="email-input" required></div><div class="col-lg-6 col-12 mb-3"><label for="initiales-input" class="form-label">Initiales *</label><input type="text" class="form-control" id="initiales-input" required maxlength="3" placeholder="ex: JD"></div></div><div class="row g-2"><div class="col-lg-6 col-12 mb-3"><label for="telephone-input" class="form-label">Téléphone</label><input type="tel" class="form-control" id="telephone-input"></div><div class="col-lg-6 col-12 mb-3"><label for="date-embauche-input" class="form-label">Date d'embauche *</label><input type="date" class="form-control" id="date-embauche-input" required></div></div><div class="row g-2"><div class="col-lg-6 col-12 mb-3"><label for="business-unit-select" class="form-label">Business Unit *</label><select class="form-select" id="business-unit-select" required onchange="loadDivisionsForBusinessUnit()"><option value="">Sélectionner une business unit</option></select></div><div class="col-lg-6 col-12 mb-3"><label for="division-select" class="form-label">Division</label><select class="form-select" id="division-select"><option value="">Sélectionner une division</option></select></div></div><div class="row g-2"><div class="col-lg-6 col-12 mb-3"><label for="type-collaborateur-select" class="form-label">Type de collaborateur *</label><select class="form-select" id="type-collaborateur-select" required onchange="loadPostesForType()"><option value="">Sélectionner un type</option></select></div><div class="col-lg-6 col-12 mb-3"><label for="poste-select" class="form-label">Poste *</label><select class="form-select" id="poste-select" required><option value="">Sélectionner un poste</option></select></div></div><div class="row g-2"><div class="col-lg-6 col-12 mb-3"><label for="grade-select" class="form-label">Grade *</label><select class="form-select" id="grade-select" required><option value="">Sélectionner un grade</option></select></div></div><div class="row g-2"><div class="col-lg-8 col-12 mb-3"><label for="notes-input" class="form-label">Notes</label><textarea class="form-control" id="notes-input" rows="3" placeholder="Notes additionnelles..."></textarea></div><div class="col-lg-4 col-lg-6 col-12 col-sm-12 mb-3"><label class="form-label">Photo de profil</label><div class="text-center"><div id="new-photo-container" class="mb-2"><!-- La photo sera affichée ici --></div><button type="button" class="btn btn-outline-primary btn-sm btn-upload-photo" id="new-upload-photo-btn"><i class="fas fa-camera me-1"></i> Ajouter une photo </button></div></div></div><div class="alert alert-info"><i class="fas fa-info-circle me-2"></i><strong>Note :</strong> Le nouveau collaborateur sera automatiquement créé avec le statut "ACTIF" et les informations RH (Grade, Poste, Type) seront enregistrées dans l'historique. </div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button><button type="button" class="btn btn-primary" onclick="submitCollaborateur()"><i class="fas fa-save me-1"></i> Enregistrer </button></div></div></div></div><!-- Edit Collaborateur Modal --><div class="modal fade" id="editCollaborateurModal" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"><i class="fas fa-edit me-2"></i> Modifier le collaborateur </h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form id="editCollaborateurForm"><input type="hidden" id="edit-id-input"><div class="row g-2"><div class="col-lg-6 col-12 mb-3"><label for="edit-nom-input" class="form-label">Nom *</label><input type="text" class="form-control" id="edit-nom-input" required></div><div class="col-lg-6 col-12 mb-3"><label for="edit-prenom-input" class="form-label">Prénom *</label><input type="text" class="form-control" id="edit-prenom-input" required></div></div><div class="row g-2"><div class="col-lg-6 col-12 mb-3"><label for="edit-email-input" class="form-label">Email *</label><input type="email" class="form-control" id="edit-email-input" required></div><div class="col-lg-6 col-12 mb-3"><label for="edit-initiales-input" class="form-label">Initiales *</label><input type="text" class="form-control" id="edit-initiales-input" required maxlength="3" placeholder="ex: JD"></div></div><div class="row g-2"><div class="col-lg-6 col-12 mb-3"><label for="edit-telephone-input" class="form-label">Téléphone</label><input type="tel" class="form-control" id="edit-telephone-input"></div><div class="col-lg-6 col-12 mb-3"><label for="edit-date-embauche-input" class="form-label">Date d'embauche *</label><input type="date" class="form-control" id="edit-date-embauche-input" required></div></div><div class="row g-2"><div class="col-lg-8 col-12 mb-3"><label for="edit-notes-input" class="form-label">Notes</label><textarea class="form-control" id="edit-notes-input" rows="3" placeholder="Notes additionnelles..."></textarea></div><div class="col-lg-4 col-lg-6 col-12 col-sm-12 mb-3"><label class="form-label">Photo de profil</label><div class="text-center"><div id="edit-photo-container" class="mb-2"><!-- La photo sera affichée ici --></div><button type="button" class="btn btn-outline-primary btn-sm btn-upload-photo" id="edit-upload-photo-btn"><i class="fas fa-camera me-1"></i> Changer la photo </button></div></div></div><div class="alert alert-info"><i class="fas fa-info-circle me-2"></i><strong>Note :</strong> Les informations RH (Business Unit, Division, Grade, Type de collaborateur, Statut) sont gérées via le module de gestion RH. Utilisez le bouton "Gestion RH" pour modifier ces informations. </div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button><button type="button" class="btn btn-primary" onclick="updateCollaborateur()"><i class="fas fa-save me-1"></i> Mettre à jour </button></div></div></div></div><!-- Delete Confirmation Modal --><div class="modal fade" id="deleteConfirmModal" tabindex="-1"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"><i class="fas fa-exclamation-triangle me-2 text-warning"></i> Confirmer la suppression </h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><p>Êtes-vous sûr de vouloir supprimer ce collaborateur ?</p><p class="text-muted">Cette action est irréversible et supprimera également toutes les saisies associées.</p></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button><button type="button" class="btn btn-danger" onclick="confirmDelete()"><i class="fas fa-trash me-1"></i> Supprimer </button></div></div></div></div><!-- Generate User Account Modal --><div class="modal fade" id="generateUserAccountModal" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"><i class="fas fa-user-plus me-2 text-primary"></i> Générer un compte utilisateur </h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="alert alert-info"><i class="fas fa-info-circle me-2"></i><strong>Prévisualisation du compte utilisateur</strong><br> Vérifiez les informations générées avant de créer le compte. </div><form id="generateUserAccountForm"><input type="hidden" id="collaborateurIdForAccount"><div class="row g-2"><div class="col-lg-6 col-12"><div class="mb-3"><label for="generatedNom" class="form-label">Nom *</label><input type="text" class="form-control" id="generatedNom" readonly></div></div><div class="col-lg-6 col-12"><div class="mb-3"><label for="generatedPrenom" class="form-label">Prénom *</label><input type="text" class="form-control" id="generatedPrenom" readonly></div></div></div><div class="row g-2"><div class="col-lg-6 col-12"><div class="mb-3"><label for="generatedEmail" class="form-label">Email *</label><input type="email" class="form-control" id="generatedEmail" readonly></div></div><div class="col-lg-6 col-12"><div class="mb-3"><label for="generatedLogin" class="form-label">Login *</label><input type="text" class="form-control" id="generatedLogin"><div class="form-text">Première lettre du prénom + nom complet</div></div></div></div><div class="row g-2"><div class="col-lg-6 col-12"><div class="mb-3"><label for="generatedRole" class="form-label">Rôle *</label><select class="form-select" id="generatedRole"><option value="USER">Utilisateur</option><option value="ADMIN">Administrateur</option><option value="MANAGER">Manager</option></select></div></div><div class="col-lg-6 col-12"><div class="mb-3"><label class="form-label">Mot de passe temporaire</label><div class="input-group"><input type="text" class="form-control" id="generatedPassword" value="TempPass123!" readonly><button class="btn btn-outline-secondary" type="button" onclick="generateNewPassword()"><i class="fas fa-sync-alt"></i></button></div><div class="form-text">L'utilisateur devra changer son mot de passe à la première connexion</div></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button><button type="button" class="btn btn-primary" onclick="confirmGenerateUserAccount()"><i class="fas fa-user-plus me-1"></i> Créer le compte </button></div></div></div></div><!-- Gestion RH Modal --><div class="modal fade" id="gestionRHModal" tabindex="-1"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"><i class="fas fa-user-tie me-2 text-primary"></i> Gestion RH - <span id="rh-collaborateur-nom"></span></h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><!-- Informations du collaborateur --><div class="row mb-4"><div class="col-12"><div class="card bg-light"><div class="card-body"><h6 class="card-title text-primary mb-3"><i class="fas fa-user me-2"></i>Informations du Collaborateur </h6><div class="row g-2"><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><strong>Nom :</strong><br><span id="rh-collaborateur-nom-complet"></span></div><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><strong>Email :</strong><br><span id="rh-collaborateur-email"></span></div><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><strong>Business Unit :</strong><br><span id="rh-collaborateur-business-unit"></span></div><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><strong>Division :</strong><br><span id="rh-collaborateur-division"></span></div></div><div class="row mt-2"><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><strong>Date d'embauche :</strong><br><span id="rh-collaborateur-date-embauche"></span></div><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><strong>Statut actuel :</strong><br><span id="rh-collaborateur-statut"></span></div><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><strong>Grade actuel :</strong><br><span id="rh-collaborateur-grade-actuel"></span></div><div class="col-lg-3 col-lg-6 col-12 col-sm-12"><strong>Poste actuel :</strong><br><span id="rh-collaborateur-poste-actuel"></span></div></div></div></div></div></div><div class="row g-2"><div class="col-lg-6 col-12"><h6 class="text-primary mb-3">Évolution des Grades</h6><div class="mb-3"><label for="rh-grade-select" class="form-label">Nouveau Grade</label><select class="form-select" id="rh-grade-select"><option value="">Sélectionner un grade</option></select></div><div class="mb-3"><label for="rh-grade-date-effet" class="form-label">Date d'effet *</label><input type="date" class="form-control" id="rh-grade-date-effet" required></div><div class="mb-3"><label for="rh-grade-motif" class="form-label">Motif</label><textarea class="form-control" id="rh-grade-motif" rows="2" placeholder="Motif de l'évolution..."></textarea></div><div class="mb-3"><label for="rh-grade-salaire" class="form-label">Salaire de base (€)</label><input type="number" class="form-control" id="rh-grade-salaire" step="0.01" min="0" placeholder="Salaire personnalisé (optionnel)"><small class="form-text text-muted">Laissez vide pour utiliser le salaire par défaut du grade</small></div><button type="button" class="btn btn-primary" onclick="ajouterEvolutionGrade()"><i class="fas fa-plus me-1"></i> Ajouter Évolution Grade </button></div><div class="col-lg-6 col-12"><h6 class="text-primary mb-3">Évolution des Postes</h6><div class="mb-3"><label for="rh-poste-select" class="form-label">Nouveau Poste</label><select class="form-select" id="rh-poste-select"><option value="">Sélectionner un poste</option></select></div><div class="mb-3"><label for="rh-poste-date-effet" class="form-label">Date d'effet *</label><input type="date" class="form-control" id="rh-poste-date-effet" required></div><div class="mb-3"><label for="rh-poste-motif" class="form-label">Motif</label><textarea class="form-control" id="rh-poste-motif" rows="2" placeholder="Motif de l'évolution..."></textarea></div><button type="button" class="btn btn-primary" onclick="ajouterEvolutionPoste()"><i class="fas fa-plus me-1"></i> Ajouter Évolution Poste </button></div></div><hr class="my-4"><div class="row g-2"><div class="col-lg-6 col-12"><h6 class="text-warning mb-3">Modification Type de Collaborateur</h6><div class="mb-3"><label for="rh-type-collaborateur-select" class="form-label">Nouveau Type de Collaborateur</label><select class="form-select" id="rh-type-collaborateur-select" onchange="loadPostesForType()"><option value="">Sélectionner un type</option></select></div><div class="mb-3"><label for="rh-type-collaborateur-date-effet" class="form-label">Date d'effet *</label><input type="date" class="form-control" id="rh-type-collaborateur-date-effet" required></div><div class="mb-3"><label for="rh-type-collaborateur-motif" class="form-label">Motif</label><textarea class="form-control" id="rh-type-collaborateur-motif" rows="2" placeholder="Motif de la modification..."></textarea></div><button type="button" class="btn btn-warning" onclick="ajouterEvolutionTypeCollaborateur()"><i class="fas fa-plus me-1"></i> Modifier Type de Collaborateur </button></div><div class="col-lg-6 col-12"><h6 class="text-info mb-3">Évolution Organisationnelle</h6><div class="row g-2"><div class="col-lg-6 col-12"><label for="rh-business-unit-select" class="form-label">Business Unit</label><select class="form-select" id="rh-business-unit-select" onchange="loadDivisionsForBusinessUnitForRH()"><option value="">Sélectionner une business unit</option></select></div><div class="col-lg-6 col-12"><label for="rh-division-select" class="form-label">Division</label><select class="form-select" id="rh-division-select"><option value="">Sélectionner une division</option></select></div></div><div class="row mt-3"><div class="col-lg-6 col-12"><label for="rh-organisation-date-effet" class="form-label">Date d'effet *</label><input type="date" class="form-control" id="rh-organisation-date-effet" required></div><div class="col-lg-6 col-12"><label for="rh-organisation-motif" class="form-label">Motif</label><textarea class="form-control" id="rh-organisation-motif" rows="1" placeholder="Motif de l'évolution..."></textarea></div></div><div class="row mt-3"><div class="col-12"><button type="button" class="btn btn-info" onclick="ajouterEvolutionOrganisation()"><i class="fas fa-plus me-1"></i> Ajouter Évolution Organisationnelle </button></div></div></div></div><hr class="my-4"><div class="row g-2"><div class="col-lg-6 col-12"><h6 class="text-success mb-3">Historique des Grades</h6><div id="historique-grades" class="table-responsive"><table class="table table-sm"><thead><tr><th>Grade</th><th>Date début</th><th>Date fin</th><th>Salaire personnalisé</th><th>Motif</th></tr></thead><tbody id="historique-grades-body"><!-- Rempli par JavaScript --></tbody></table></div></div><div class="col-lg-6 col-12"><h6 class="text-success mb-3">Historique des Postes</h6><div id="historique-postes" class="table-responsive"><table class="table table-sm"><thead><tr><th>Poste</th><th>Date début</th><th>Date fin</th><th>Motif</th></tr></thead><tbody id="historique-postes-body"><!-- Rempli par JavaScript --></tbody></table></div></div></div><hr class="my-4"><div class="row g-2"><div class="col-12"><h6 class="text-warning mb-3">Historique des Évolutions Organisationnelles</h6><div id="historique-organisations" class="table-responsive"><table class="table table-sm"><thead><tr><th>Business Unit</th><th>Division</th><th>Date début</th><th>Date fin</th><th>Motif</th></tr></thead><tbody id="historique-organisations-body"><!-- Rempli par JavaScript --></tbody></table></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button></div></div></div></div><!-- View Collaborateur Modal --><div class="modal fade" id="viewCollaborateurModal" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"><i class="fas fa-eye me-2 text-info"></i> Détails du Collaborateur </h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><!-- Section Photo de Profil --><div class="row mb-4"><div class="col-12 text-center"><div id="view-photo-container" class="d-inline-block"><!-- La photo sera affichée ici --></div></div></div><div class="row g-2"><div class="col-lg-6 col-12"><h6 class="text-primary mb-3">Informations Personnelles</h6><div class="mb-3"><label class="fw-bold">Nom :</label><span id="view-nom" class="ms-2"></span></div><div class="mb-3"><label class="fw-bold">Prénom :</label><span id="view-prenom" class="ms-2"></span></div><div class="mb-3"><label class="fw-bold">Initiales :</label><span id="view-initiales" class="ms-2"></span></div><div class="mb-3"><label class="fw-bold">Email :</label><span id="view-email" class="ms-2"></span></div><div class="mb-3"><label class="fw-bold">Téléphone :</label><span id="view-telephone" class="ms-2"></span></div></div><div class="col-lg-6 col-12"><h6 class="text-primary mb-3">Informations Professionnelles</h6><div class="mb-3"><label class="fw-bold">Business Unit :</label><span id="view-business-unit" class="ms-2"></span></div><div class="mb-3"><label class="fw-bold">Division :</label><span id="view-division" class="ms-2"></span></div><div class="mb-3"><label class="fw-bold">Grade :</label><span id="view-grade" class="ms-2"></span></div><div class="mb-3"><label class="fw-bold">Type de Collaborateur :</label><span id="view-type-collaborateur" class="ms-2"></span></div><div class="mb-3"><label class="fw-bold">Poste :</label><span id="view-poste" class="ms-2"></span></div></div></div><div class="row mt-3"><div class="col-lg-6 col-12"><h6 class="text-primary mb-3">Dates et Statut</h6><div class="mb-3"><label class="fw-bold">Date d'embauche :</label><span id="view-date-embauche" class="ms-2"></span></div><div class="mb-3"><label class="fw-bold">Date de départ :</label><span id="view-date-depart" class="ms-2"></span></div><div class="mb-3"><label class="fw-bold">Statut :</label><span id="view-statut" class="ms-2"></span></div></div><div class="col-lg-6 col-12"><h6 class="text-primary mb-3">Notes</h6><div class="mb-3"><label class="fw-bold">Notes :</label><span id="view-notes" class="ms-2"></span></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button></div></div></div></div><!-- Scripts --><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script><!-- Script d'authentification déjà inclus plus haut --><!-- SessionManager pour la gestion centralisée des sessions --><script src="js/session-manager.js"></script><script src="js/sidebar.js" defer></script><!-- Modal de confirmation de suppression superviseur --><div class="modal fade" id="deleteSupervisorModal" tabindex="-1"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Confirmer la suppression</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><p>Êtes-vous sûr de vouloir supprimer cette relation superviseur ?</p><p><strong>Collaborateur:</strong><span id="delete-collaborateur-name"></span></p><p><strong>Superviseur:</strong><span id="delete-supervisor-name"></span></p></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button><button type="button" class="btn btn-danger" id="confirm-delete-supervisor">Supprimer</button></div></div></div></div><!-- Edit User Modal --><div class="modal fade" id="editUserModal" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"><i class="fas fa-edit me-2"></i> Modifier l'Utilisateur </h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form id="editUserForm"><input type="hidden" id="editUserId"><div class="mb-3"><label for="editUserLogin" class="form-label">Login</label><input type="text" class="form-control" id="editUserLogin" maxlength="50" placeholder="Ex: jdupont ou jdupont2"><div class="form-text"><i class="fas fa-info-circle text-info"></i> Le login doit être unique. S'il existe déjà, un numéro sera ajouté automatiquement. </div></div><div class="mb-3"><label for="editUserPassword" class="form-label">Nouveau Mot de passe (laisser vide pour ne pas changer)</label><input type="password" class="form-control" id="editUserPassword" placeholder="Ex: MonMotDePasse123!"><div class="form-text"><i class="fas fa-info-circle text-info"></i><strong>Règles de sécurité :</strong><ul class="mt-1 mb-0"><li>Au moins 8 caractères</li><li>Au moins une minuscule (a-z)</li><li>Au moins une majuscule (A-Z)</li><li>Au moins un chiffre (0-9)</li><li>Au moins un caractère spécial (@$!%*?&)</li></ul></div></div><div class="mb-3"><label for="editUserName" class="form-label">Nom *</label><input type="text" class="form-control" id="editUserName" required></div><div class="mb-3"><label for="editUserFirstName" class="form-label">Prénom *</label><input type="text" class="form-control" id="editUserFirstName" required></div><div class="mb-3"><label for="editUserEmail" class="form-label">Email *</label><input type="email" class="form-control" id="editUserEmail" required></div><div class="mb-3"><label for="editUserRole" class="form-label">Rôle *</label><select class="form-select" id="editUserRole" required><option value="">Chargement des rôles...</option></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button><button type="button" class="btn btn-primary" onclick="updateUser()"><i class="fas fa-save me-1"></i> Mettre à jour </button></div></div></div></div><!-- Script pour la gestion des photos --><script src="js/photo-upload.js"></script></body></html>