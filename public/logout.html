<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">D√©connexion - EWM</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- CSS des variables de branding dynamiques -->
    <link rel="stylesheet" href="/config/themes/brand-variables.css">
    <style>
        body {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .logout-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 100%;
        }
        .logout-icon {
            font-size: 4rem;
            color: #e74c3c;
            margin-bottom: 20px;
        }
        .btn-logout {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-logout:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
            color: white;
        }
    </style>
    
    <!-- Script de chargement du branding (doit √™tre charg√© en premier) -->
    <script src="js/branding-loader.js"></script>
    
    <!-- Script pour la gestion utilisateur -->
    <script src="js/user-header.js"></script>
    <script src="js/profile-menu.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/tasks.js"></script>
</head>
<body>
    <div class="logout-card">
        <div class="logout-icon">
            <i class="fas fa-sign-out-alt"></i>
        </div>
        <h3 class="mb-3">D√©connexion</h3>
        <p class="text-muted mb-4">√ätes-vous s√ªr de vouloir vous d√©connecter ?</p>
        
        <div class="d-grid gap-2">
            <button class="btn btn-logout" onclick="performLogout()">
                <i class="fas fa-sign-out-alt me-2"></i>
                Se d√©connecter
            </button>
            <a href="/dashboard.html" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left me-2"></i>
                Retour au dashboard
            </a>
        </div>
    </div>

    <script>
        // Appliquer le branding d√®s que la configuration est charg√©e
        window.whenBrandingReady(function(config) {
            console.log('üé® Application du branding √† la page de d√©connexion...');
            
            // Titre de la page
            const pageTitle = document.getElementById('page-title');
            if (pageTitle && config.app?.name) {
                pageTitle.textContent = 'D√©connexion - ' + config.app.name;
            }
            
            // Ajouter la banni√®re d√©mo si n√©cessaire
            if (config.demo?.mode && config.demo?.bannerText) {
                const demoBanner = document.createElement('div');
                demoBanner.className = 'demo-banner';
                demoBanner.innerHTML = `
                    <i class="fas fa-info-circle me-2"></i>
                    <span>${config.demo.bannerText}</span>
                `;
                demoBanner.style.cssText = `
                    background-color: var(--brand-warning);
                    color: white;
                    padding: 10px 20px;
                    text-align: center;
                    font-weight: 600;
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    z-index: 1030;
                `;
                document.body.insertBefore(demoBanner, document.body.firstChild);
            }
            
            console.log('‚úÖ Branding logout appliqu√©');
        });
    
        function performLogout() {
            // Supprimer le token et les donn√©es utilisateur
            localStorage.removeItem('authToken');
            localStorage.removeItem('userData');
            localStorage.removeItem('user');
            
            // Afficher un message de confirmation
            alert('Vous avez √©t√© d√©connect√© avec succ√®s !');
            
            // Rediriger vers la page de connexion
            window.location.href = '/';
        }
        
        // V√©rifier si l'utilisateur est connect√©
        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('authToken');
            if (!token) {
                // Si pas de token, rediriger vers la page de connexion
                window.location.href = '/';
            }
        });
    </script>
</body>
</html> 