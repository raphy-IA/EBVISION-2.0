EBVISION.Bosssystemsai.com

COPIER BASE DE DONNEE LOCALE VERS DISTANT
Creation du DUMP Local


ssh raphyai82@148.230.80.83
cd /home/raphyai82/apps/ebvision/

MISE A JOUR AVEC SSHconfiguré sur GitHub
cd ~/apps/ebvision
git pull origin main
npm install
npm run build
pm2 restart ebvision
sudo systemctl restart ebvision

# Créer un dump de votre base locale
pg_dump -h localhost -U postgres -d eb_vision_2_0 --encoding=UTF8 --no-owner --no-privileges --clean --if-exists > "D:\10. Programmation\Projets\SavedDB\ebvision_local_export.sql"

# pg_dump complet (structure + données)
pg_dump -h localhost -U postgres -d eb_vision_2_0 --clean --if-exists > ebvision_local_export.sql

copier le ficher sur le serveur de production
scp "D:\10. Programmation\Projets\SavedDB\ebvision_local_export.sql" raphyai82@148.230.80.83:/home/raphyai82/apps/ebvision/importedDB/ebvision_local_export.sql

 Sur le serveur de production
 # Créer une sauvegarde de sécurité
pg_dump -h localhost -U ebvision_user -d ebvision_db > /tmp/ebvision_prod_backup_$(date +%Y%m%d-%H%M%S).sql

Arrêter l'application ebvision :
sudo systemctl stop ebvision.service
# ou
sudo pkill -f "node.*ebvision"

Restaurer votre base locale en production :
# Option 1: Écraser complètement la base
psql -h localhost -U ebvision_user -d ebvision_db < /home/raphyai82/apps/ebvision/importedDB/ebvision_local_export.sql

# Option 2: Supprimer et recréer la base (plus propre)
dropdb -h localhost -U ebvision_user ebvision_db
createdb -h localhost -U ebvision_user ebvision_db
psql -h localhost -U ebvision_user -d ebvision_db < /home/raphyai82/apps/ebvision/importedDB/ebvision_local_export.sql